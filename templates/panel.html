<!DOCTYPE html>
<html class="x-admin-sm">
<head>
    <meta charset="UTF-8">
    <title>业务报表系统</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    {# <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi"/>#}
    <meta name="viewport" content="width=device-width,user-scalable=yes,initial-scale=1.0,minimum-scale=0.4,maximum-scale=3.0"/>
    <link rel="stylesheet" href="../static/css/font.css">
    <link rel="stylesheet" href="../static/css/xadmin.css">
    <script src="../static/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="../static/js/xadmin.js"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
          <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
          <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
</head>
<body>
<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-body ">
                    <blockquote class="layui-elem-quote">欢迎管理员：
                        <span class="x-red">{% if user.username == '' %}未登录{% else %}{{ user.username|upper }}{% endif %}</span> ！ 当前时间 : <span id="time"></span>
                    </blockquote>
                </div>
            </div>
        </div>

        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">昨日数据</div>
                <div class="layui-card-body ">
                    <ul class="layui-row layui-col-space10 layui-this x-admin-carousel x-admin-backlog">
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>新加数</h3>
                                <p><cite id="new_value_day"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>回访数</h3>
                                <p><cite id="return_value_day"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>约定付款数</h3>
                                <p><cite id="pay_value_day"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>成交数</h3>
                                <p><cite id="transaction_value_day"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>业务介绍成功率</h3>
                                <p><cite id="yesterday_development_business_introduction_rate_day"></cite></p>
                            </a>
                        </li>

                    </ul>
                </div>
            </div>
        </div>

        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">大盘总数据</div>
                <div class="layui-card">
                    <div class="layui-card-header">新增数据</div>
                    <div class="layui-card-body ">
                        <ul class="layui-row layui-col-space10 layui-this x-admin-carousel x-admin-backlog">
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>新加数</h3>
                                    <p><cite id="development_new_volume_all"></cite></p>
                                </a>
                            </li>
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>新客数</h3>
                                    <p><cite id="development_new_customer_volume_all"></cite></p>
                                </a>
                            </li>
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>约定付款数</h3>
                                    <p><cite id="development_pay_volume_all"></cite></p>
                                </a>
                            </li>
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>成交数</h3>
                                    <p><cite id="development_transaction_volume_all"></cite></p>
                                </a>
                            </li>
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>业务介绍成功率</h3>
                                    <p><cite id="development_business_introduction_rate_all"></cite></p>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
                <div class="layui-card">
                    <div class="layui-card-header">回访数据</div>
                    <div class="layui-card-body ">
                        <ul class="layui-row layui-col-space10 layui-this x-admin-carousel x-admin-backlog">
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>回访数</h3>
                                    <p><cite id="return_return_volume_all"></cite></p>
                                </a>
                            </li>
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>约定付款数</h3>
                                    <p><cite id="return_pay_volume_all"></cite></p>
                                </a>
                            </li>
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>成交数</h3>
                                    <p><cite id="return_transaction_volume_all"></cite></p>
                                </a>
                            </li>
                            <li class="layui-col-md2 layui-col-xs6">
                                <a href="javascript:;" class="x-admin-backlog-body">
                                    <h3>业务介绍成功率</h3>
                                    <p><cite id="return_business_introduction_rate_all"></cite></p>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">系统数据</div>
                <div class="layui-card-body ">
                    <ul class="layui-row layui-col-space10 layui-this x-admin-carousel x-admin-backlog">
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>成员数</h3>
                                <p><cite id="person-count"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>分组数</h3>
                                <p><cite id="group-count"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>新增数据</h3>
                                <p><cite id="development-count"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>回访数据</h3>
                                <p><cite id="return-count"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>绩效数据</h3>
                                <p><cite id="performance-count"></cite></p>
                            </a>
                        </li>
                        <li class="layui-col-md2 layui-col-xs6">
                            <a href="javascript:;" class="x-admin-backlog-body">
                                <h3>公海数据</h3>
                                <p><cite id="high-seas-count"></cite></p>
                            </a>
                        </li>

                    </ul>
                </div>
            </div>
        </div>

        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">开发团队</div>
                <div class="layui-card-body ">
                    <table class="layui-table">
                        <tbody>
                        <tr>
                            <th><span class="x-red">系统BUG</span></th>
                            <td>若系统存在Bug，请将出错内容以截图的方式发送给川柏(QQ:<span class="x-red">2334119861</span>)</td>
                        </tr>
                        <tr>
                            <th>版权所有</th>
                            <td>
                                <a href="http://www.maijia100.com" target="_blank">麦佳电商</a></td>
                        </tr>
                        <tr>
                            <th>开发者</th>
                            <td>麦佳川柏(bnightning@163.com)</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <style id="welcome_style"></style>
        <div class="layui-col-md12">
            <blockquote class="layui-elem-quote layui-quote-nm">本系统由Python 3.6，Django 2.2，X-admin, MySQL 8, Layui提供技术支持。</blockquote>
        </div>
    </div>
</div>
</div>
<script type="text/javascript">
    layui.use(['form', 'layer', 'laydate'], function () {
        var form = layui.form;
        var layer = layui.layer;
        var laydate = layui.laydate;
        var $ = layui.jquery;
        $.ajax({
            url: '/api/panel/',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                if (data.code === 0) {
                    console.log(data);
                    $('#time').html(data.data.sys.time);
                    $('#person-count').html(data.data.sys.person_count);
                    $('#group-count').html(data.data.sys.group_count);
                    $('#development-count').html(data.data.sys.development_count);
                    $('#return-count').html(data.data.sys.return_count);
                    $('#performance-count').html(data.data.sys.performance_count);
                    $('#high-seas-count').html(data.data.sys.high_seas_count);

                    $('#new_value_day').html(data.data.panel.yesterday_development_new_volume);
                    $('#return_value_day').html(data.data.panel.yesterday_return_return_volume);
                    $('#pay_value_day').html(data.data.panel.yesterday_development_contract_pay_volume);
                    $('#transaction_value_day').html(data.data.panel.yesterday_performance_transaction_volume);
                    $('#yesterday_development_business_introduction_rate_day').html(data.data.panel.yesterday_development_business_introduction_rate_day);

                    $('#development_new_customer_volume_all').html(data.data.panel.development_new_customer_volume_all);
                    $('#development_pay_volume_all').html(data.data.panel.development_pay_volume_all);
                    $('#development_transaction_volume_all').html(data.data.panel.development_transaction_volume_all);
                    $('#development_new_volume_all').html(data.data.panel.development_new_volume_all);
                    $('#development_business_introduction_rate_all').html(data.data.panel.development_business_introduction_rate_all);

                    $('#return_transaction_volume_all').html(data.data.panel.development_transaction_volume_all);

                    $('#return_pay_volume_all').html(data.data.panel.return_contract_pay_volume_all);
                    $('#return_return_volume_all').html(data.data.panel.return_return_visit_volume_all);
                    $('#return_business_introduction_rate_all').html(data.data.panel.return_business_introduction_rate_all);

                } else {
                    layer.msg(data.msg, {icon: 2, time: 1000});
                }
            },
            error: function (error) {
                layer.alert('网络连接错误', {icon: 2, time: 1000});
            }
        });

    });


</script>
</body>
</html>